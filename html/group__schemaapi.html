<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Schema API</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Schema API</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gb7a73e88621851e4bed62fd6063eb2f9">db_create_table</a> (&amp;$ret, $name, $table)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#geb423ba53e5133548abe3d999f86e787">db_field_names</a> ($fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g1d594f0ad0eab77e4b925887be7e4b08">db_type_placeholder</a> ($type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g979670bd6bd2e34337ffc5f0810f2d71">drupal_get_schema</a> ($table=NULL, $rebuild=FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g9706b8d6ecdac10302d83bd50935a698">drupal_install_schema</a> ($module)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g0688b6627af9dc05f2618f81489c3db0">drupal_uninstall_schema</a> ($module)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gecb0d63f03b96dd1426298804e091d3b">drupal_get_schema_unprocessed</a> ($module, $table=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g7bd9447538f3e7c5baec5d8d67db164c">_drupal_initialize_schema</a> ($module, &amp;$schema)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gacfcd6f676ee9062f0ba50a008a05443">drupal_schema_fields_sql</a> ($table, $prefix=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g85da8424c4111b46aefb6fcb3a899c7d">drupal_write_record</a> ($table, &amp;$object, $update=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gd567c41b41c4d48ed50af9b878c8ecaf">db_create_table_sql</a> ($name, $table)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga4be538758cb8279d3aeed18e1b25c2d"></a><!-- doxytag: member="schemaapi::_db_create_keys_sql" ref="ga4be538758cb8279d3aeed18e1b25c2d" args="($spec)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_db_create_keys_sql</b> ($spec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gaaad5b3ac359e52b5c8e1058a3748615"></a><!-- doxytag: member="schemaapi::_db_create_key_sql" ref="gaaad5b3ac359e52b5c8e1058a3748615" args="($fields)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_db_create_key_sql</b> ($fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g4c5486f85f0d1feeb4efba32f01926fb">_db_process_field</a> ($field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ge5ec976573ad46239192dcd139d07f10">_db_create_field_sql</a> ($name, $spec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gbb4d2d8b00f915ba7e8c0a9d985d597d">db_rename_table</a> (&amp;$ret, $table, $new_name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g1da2016702d7da653316aa34fcd86bd9">db_drop_table</a> (&amp;$ret, $table)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gdffaa3314b3f50ffd6ba4da381ec78fb">db_add_field</a> (&amp;$ret, $table, $field, $spec, $keys_new=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ge2013b878edbcfe21ca123e73af4684a">db_drop_field</a> (&amp;$ret, $table, $field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gf5a1ae05cf11189bc6e0f6a8ed2b7701">db_field_set_default</a> (&amp;$ret, $table, $field, $default)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga01758e1338d2b1ce59da26c08c6448a">db_field_set_no_default</a> (&amp;$ret, $table, $field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g95e6db824dbcdd4f9f486e657137d482">db_add_primary_key</a> (&amp;$ret, $table, $fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gb8ee0e7e9ca04e60ec8b0464a247425d">db_drop_primary_key</a> (&amp;$ret, $table)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g407af986b5e78e1ef11242d5be8adfc4">db_add_unique_key</a> (&amp;$ret, $table, $name, $fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g727ffb0cbdb6bc2afd5803b09e296603">db_drop_unique_key</a> (&amp;$ret, $table, $name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gaaa3b734b6b1acc09fb5e2ac8bd7d925">db_add_index</a> (&amp;$ret, $table, $name, $fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g3a9c0b20502c5afb8177be5753f8cdbb">db_drop_index</a> (&amp;$ret, $table, $name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g03f152245358d2db68d067aa8a1fceb4">db_change_field</a> (&amp;$ret, $table, $field, $field_new, $spec, $keys_new=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#g1d29b142caeee2f0f2217be16857b9ae">db_last_insert_id</a> ($table, $field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gadf0495656599ba9336d68675b54f8dd">db_type_map</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g67b8a831a7fa968df49a645b11173e82"></a><!-- doxytag: member="schemaapi::_db_create_index_sql" ref="g67b8a831a7fa968df49a645b11173e82" args="($table, $name, $fields)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_db_create_index_sql</b> ($table, $name, $fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g40102607d0c0d76f92fc9acd18bd9cc9"></a><!-- doxytag: member="schemaapi::_db_create_keys" ref="g40102607d0c0d76f92fc9acd18bd9cc9" args="(&amp;$ret, $table, $new_keys)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_db_create_keys</b> (&amp;$ret, $table, $new_keys)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
End of "defgroup database".<p>
A Drupal schema definition is an array structure representing one or more tables and their related keys and indexes. A schema is defined by hook_schema(), which usually lives in a modulename.install file.<p>
By implementing hook_schema() and specifying the tables your module declares, you can easily create and drop these tables on all supported database engines. You don't have to deal with the different SQL dialects for table creation and alteration of the supported database engines.<p>
hook_schema() should return an array with a key for each table that the module defines.<p>
The following keys are defined:<p>
<ul>
<li>'description': A string describing this table and its purpose. References to other tables should be enclosed in curly-brackets. For example, the node_revisions table description field might contain "Stores per-revision title and body data for each {node}."</li><li>'fields': An associative array ('fieldname' =&gt; specification) that describes the table's database columns. The specification is also an array. The following specification parameters are defined:</li></ul>
<p>
<ul>
<li>'description': A string describing this field and its purpose. References to other tables should be enclosed in curly-brackets. For example, the node table vid field description might contain "Always holds the largest (most recent) {node_revisions}.vid value for this nid."</li><li>'type': The generic datatype: 'varchar', 'int', 'serial' 'float', 'numeric', 'text', 'blob' or 'datetime'. Most types just map to the according database engine specific datatypes. Use 'serial' for auto incrementing fields. This will expand to 'int auto_increment' on mysql.</li><li>'serialize': A boolean indicating whether the field will be stored as a serialized string.</li><li>'size': The data size: 'tiny', 'small', 'medium', 'normal', 'big'. This is a hint about the largest value the field will store and determines which of the database engine specific datatypes will be used (e.g. on MySQL, TINYINT vs. INT vs. BIGINT). 'normal', the default, selects the base type (e.g. on MySQL, INT, VARCHAR, BLOB, etc.).</li></ul>
<p>
Not all sizes are available for all data types. See <a class="el" href="group__schemaapi.html#gadf0495656599ba9336d68675b54f8dd">db_type_map()</a> for possible combinations.<ul>
<li>'not null': If true, no NULL values will be allowed in this database column. Defaults to false.</li><li>'default': The field's default value. The PHP type of the value matters: '', '0', and 0 are all different. If you specify '0' as the default value for a type 'int' field it will not work because '0' is a string containing the character "zero", not an integer.</li><li>'length': The maximal length of a type 'char', 'varchar' or 'text' field. Ignored for other field types.</li><li>'unsigned': A boolean indicating whether a type 'int', 'float' and 'numeric' only is signed or unsigned. Defaults to FALSE. Ignored for other field types.</li><li>'precision', 'scale': For type 'numeric' fields, indicates the precision (total number of significant digits) and scale (decimal digits right of the decimal point). Both values are mandatory. Ignored for other field types.</li></ul>
<p>
All parameters apart from 'type' are optional except that type 'numeric' columns must specify 'precision' and 'scale'.<p>
<ul>
<li>'primary key': An array of one or more key column specifiers (see below) that form the primary key.</li><li>'unique keys': An associative array of unique keys ('keyname' =&gt; specification). Each specification is an array of one or more key column specifiers (see below) that form a unique key on the table.</li><li>'indexes': An associative array of indexes ('indexame' =&gt; specification). Each specification is an array of one or more key column specifiers (see below) that form an index on the table.</li></ul>
<p>
A key column specifier is either a string naming a column or an array of two elements, column name and length, specifying a prefix of the named column.<p>
As an example, here is a SUBSET of the schema definition for Drupal's 'node' table. It show four fields (nid, vid, type, and title), the primary key on field 'nid', a unique key named 'vid' on field 'vid', and two indexes, one named 'nid' on field 'nid' and one named 'node_title_type' on the field 'title' and the first four bytes of the field 'type':<p>
<div class="fragment"><pre class="fragment"> $schema[<span class="stringliteral">'node'</span>] = array(
   <span class="stringliteral">'fields'</span> =&gt; array(
     <span class="stringliteral">'nid'</span>      =&gt; array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'serial'</span>, <span class="stringliteral">'unsigned'</span> =&gt; TRUE, <span class="stringliteral">'not null'</span> =&gt; TRUE),
     <span class="stringliteral">'vid'</span>      =&gt; array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'int'</span>, <span class="stringliteral">'unsigned'</span> =&gt; TRUE, <span class="stringliteral">'not null'</span> =&gt; TRUE, <span class="stringliteral">'default'</span> =&gt; 0),
     <span class="stringliteral">'type'</span>     =&gt; array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'varchar'</span>, <span class="stringliteral">'length'</span> =&gt; 32, <span class="stringliteral">'not null'</span> =&gt; TRUE, <span class="stringliteral">'default'</span> =&gt; <span class="stringliteral">''</span>),
     <span class="stringliteral">'title'</span>    =&gt; array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'varchar'</span>, <span class="stringliteral">'length'</span> =&gt; 128, <span class="stringliteral">'not null'</span> =&gt; TRUE, <span class="stringliteral">'default'</span> =&gt; <span class="stringliteral">''</span>),
   ),
   <span class="stringliteral">'primary key'</span> =&gt; array(<span class="stringliteral">'nid'</span>),
   <span class="stringliteral">'unique keys'</span> =&gt; array(
     <span class="stringliteral">'vid'</span>     =&gt; array(<span class="stringliteral">'vid'</span>)
   ),
   <span class="stringliteral">'indexes'</span> =&gt; array(
     <span class="stringliteral">'nid'</span>                 =&gt; array(<span class="stringliteral">'nid'</span>),
     <span class="stringliteral">'node_title_type'</span>     =&gt; array(<span class="stringliteral">'title'</span>, array(<span class="stringliteral">'type'</span>, 4)),
   ),
 );
</pre></div><p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__schemaapi.html#g9706b8d6ecdac10302d83bd50935a698">drupal_install_schema()</a> </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ge5ec976573ad46239192dcd139d07f10"></a><!-- doxytag: member="database.mysql&#45;common.inc::_db_create_field_sql" ref="ge5ec976573ad46239192dcd139d07f10" args="($name, $spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_db_create_field_sql           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>spec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an SQL string for a field to be used in table creation or alteration.<p>
Before passing a field out of a schema definition into this function it has to be processed by <a class="el" href="group__schemaapi.html#g4c5486f85f0d1feeb4efba32f01926fb">_db_process_field()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>Name of the field. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$spec</em>&nbsp;</td><td>The field specification, as per the schema data structure format. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g4c5486f85f0d1feeb4efba32f01926fb"></a><!-- doxytag: member="database.mysql&#45;common.inc::_db_process_field" ref="g4c5486f85f0d1feeb4efba32f01926fb" args="($field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_db_process_field           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set database-engine specific properties for a field.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>A field description array, as specified in the schema documentation. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g7bd9447538f3e7c5baec5d8d67db164c"></a><!-- doxytag: member="common.inc::_drupal_initialize_schema" ref="g7bd9447538f3e7c5baec5d8d67db164c" args="($module, &amp;$schema)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_drupal_initialize_schema           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>schema</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fill in required default values for table definitions returned by hook_schema().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$module</em>&nbsp;</td><td>The module for which hook_schema() was invoked. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$schema</em>&nbsp;</td><td>The schema definition array as it was returned by the module's hook_schema(). </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gdffaa3314b3f50ffd6ba4da381ec78fb"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_add_field" ref="gdffaa3314b3f50ffd6ba4da381ec78fb" args="(&amp;$ret, $table, $field, $spec, $keys_new=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_add_field           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>keys_new</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a new field to a table.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>Name of the table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>Name of the field to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$spec</em>&nbsp;</td><td>The field specification array, as taken from a schema definition. The specification may also contain the key 'initial', the newly created field will be set to the value of the key in all rows. This is most useful for creating NOT NULL columns with no default value in existing tables. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$keys_new</em>&nbsp;</td><td>Optional keys and indexes specification to be created on the table along with adding the field. The format is the same as a table specification but without the 'fields' element. If you are adding a type 'serial' field, you MUST specify at least one key or index including it in this array. </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__schemaapi.html#g03f152245358d2db68d067aa8a1fceb4">db_change_field</a> for more explanation why. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gaaa3b734b6b1acc09fb5e2ac8bd7d925"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_add_index" ref="gaaa3b734b6b1acc09fb5e2ac8bd7d925" args="(&amp;$ret, $table, $name, $fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_add_index           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fields</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add an index.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the index. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of field names. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g95e6db824dbcdd4f9f486e657137d482"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_add_primary_key" ref="g95e6db824dbcdd4f9f486e657137d482" args="(&amp;$ret, $table, $fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_add_primary_key           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fields</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a primary key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>Fields for the primary key. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g407af986b5e78e1ef11242d5be8adfc4"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_add_unique_key" ref="g407af986b5e78e1ef11242d5be8adfc4" args="(&amp;$ret, $table, $name, $fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_add_unique_key           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fields</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a unique key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the key. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of field names. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g03f152245358d2db68d067aa8a1fceb4"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_change_field" ref="g03f152245358d2db68d067aa8a1fceb4" args="(&amp;$ret, $table, $field, $field_new, $spec, $keys_new=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_change_field           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>keys_new</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change a field definition.<p>
IMPORTANT NOTE: To maintain database portability, you have to explicitly recreate all indices and primary keys that are using the changed field.<p>
That means that you have to drop all affected keys and indexes with db_drop_{primary_key,unique_key,index}() before calling <a class="el" href="group__schemaapi.html#g03f152245358d2db68d067aa8a1fceb4">db_change_field()</a>. To recreate the keys and indices, pass the key definitions as the optional $keys_new argument directly to <a class="el" href="group__schemaapi.html#g03f152245358d2db68d067aa8a1fceb4">db_change_field()</a>.<p>
For example, suppose you have: <div class="fragment"><pre class="fragment"> $schema[<span class="stringliteral">'foo'</span>] = array(
   <span class="stringliteral">'fields'</span> =&gt; array(
     <span class="stringliteral">'bar'</span> =&gt; array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'int'</span>, <span class="stringliteral">'not null'</span> =&gt; TRUE)
   ),
   <span class="stringliteral">'primary key'</span> =&gt; array(<span class="stringliteral">'bar'</span>)
 );
</pre></div> and you want to change foo.bar to be type serial, leaving it as the primary key. The correct sequence is: <div class="fragment"><pre class="fragment"> <a class="code" href="group__schemaapi.html#gb8ee0e7e9ca04e60ec8b0464a247425d">db_drop_primary_key</a>($ret, <span class="stringliteral">'foo'</span>);
 <a class="code" href="group__schemaapi.html#g03f152245358d2db68d067aa8a1fceb4">db_change_field</a>($ret, <span class="stringliteral">'foo'</span>, <span class="stringliteral">'bar'</span>, <span class="stringliteral">'bar'</span>,
   array(<span class="stringliteral">'type'</span> =&gt; <span class="stringliteral">'serial'</span>, <span class="stringliteral">'not null'</span> =&gt; TRUE),
   array(<span class="stringliteral">'primary key'</span> =&gt; array(<span class="stringliteral">'bar'</span>)));
</pre></div><p>
The reasons for this are due to the different database engines:<p>
On PostgreSQL, changing a field definition involves adding a new field and dropping an old one which* causes any indices, primary keys and sequences (from serial-type fields) that use the changed field to be dropped.<p>
On MySQL, all type 'serial' fields must be part of at least one key or index as soon as they are created. You cannot use db_add_{primary_key,unique_key,index}() for this purpose because the ALTER TABLE command will fail to add the column without a key or index specification. The solution is to use the optional $keys_new argument to create the key or index at the same time as field.<p>
You could use db_add_{primary_key,unique_key,index}() in all cases unless you are converting a field to be type serial. You can use the $keys_new argument in all cases.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>Name of the table. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>Name of the field to change. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field_new</em>&nbsp;</td><td>New name for the field (set to the same as $field if you don't want to change the name). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$spec</em>&nbsp;</td><td>The field specification for the new field. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$keys_new</em>&nbsp;</td><td>Optional keys and indexes specification to be created on the table along with changing the field. The format is the same as a table specification but without the 'fields' element. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gb7a73e88621851e4bed62fd6063eb2f9"></a><!-- doxytag: member="database.inc::db_create_table" ref="gb7a73e88621851e4bed62fd6063eb2f9" args="(&amp;$ret, $name, $table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_create_table           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new table from a Drupal table definition.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the table to create. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>A Schema API table definition array. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gd567c41b41c4d48ed50af9b878c8ecaf"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_create_table_sql" ref="gd567c41b41c4d48ed50af9b878c8ecaf" args="($name, $table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_create_table_sql           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate SQL to create a new table from a Drupal schema definition.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the table to create. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>A Schema API table definition array. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An array of SQL statements to create the table. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge2013b878edbcfe21ca123e73af4684a"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_drop_field" ref="ge2013b878edbcfe21ca123e73af4684a" args="(&amp;$ret, $table, $field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_drop_field           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Drop a field.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The field to be dropped. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g3a9c0b20502c5afb8177be5753f8cdbb"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_drop_index" ref="g3a9c0b20502c5afb8177be5753f8cdbb" args="(&amp;$ret, $table, $name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_drop_index           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Drop an index.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the index. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gb8ee0e7e9ca04e60ec8b0464a247425d"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_drop_primary_key" ref="gb8ee0e7e9ca04e60ec8b0464a247425d" args="(&amp;$ret, $table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_drop_primary_key           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Drop the primary key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g1da2016702d7da653316aa34fcd86bd9"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_drop_table" ref="g1da2016702d7da653316aa34fcd86bd9" args="(&amp;$ret, $table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_drop_table           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Drop a table.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be dropped. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g727ffb0cbdb6bc2afd5803b09e296603"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_drop_unique_key" ref="g727ffb0cbdb6bc2afd5803b09e296603" args="(&amp;$ret, $table, $name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_drop_unique_key           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Drop a unique key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>The name of the key. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="geb423ba53e5133548abe3d999f86e787"></a><!-- doxytag: member="database.inc::db_field_names" ref="geb423ba53e5133548abe3d999f86e787" args="($fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_field_names           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fields</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return an array of field names from an array of key/index column specifiers.<p>
This is usually an identity function but if a key/index uses a column prefix specification, this function extracts just the name.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of key/index column specifiers. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An array of field names. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gf5a1ae05cf11189bc6e0f6a8ed2b7701"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_field_set_default" ref="gf5a1ae05cf11189bc6e0f6a8ed2b7701" args="(&amp;$ret, $table, $field, $default)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_field_set_default           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>default</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the default value for a field.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The field to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$default</em>&nbsp;</td><td>Default value to be set. NULL for 'default NULL'. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ga01758e1338d2b1ce59da26c08c6448a"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_field_set_no_default" ref="ga01758e1338d2b1ce59da26c08c6448a" args="(&amp;$ret, $table, $field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_field_set_no_default           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set a field to have no default value.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be altered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The field to be altered. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g1d29b142caeee2f0f2217be16857b9ae"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_last_insert_id" ref="g1d29b142caeee2f0f2217be16857b9ae" args="($table, $field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_last_insert_id           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the last insert id.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The name of the table you inserted into. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The name of the autoincrement field. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gbb4d2d8b00f915ba7e8c0a9d985d597d"></a><!-- doxytag: member="database.mysql&#45;common.inc::db_rename_table" ref="gbb4d2d8b00f915ba7e8c0a9d985d597d" args="(&amp;$ret, $table, $new_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_rename_table           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>new_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rename a table.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ret</em>&nbsp;</td><td>Array to which query results will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to be renamed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$new_name</em>&nbsp;</td><td>The new name for the table. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gadf0495656599ba9336d68675b54f8dd"></a><!-- doxytag: member="database.pgsql.inc::db_type_map" ref="gadf0495656599ba9336d68675b54f8dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_type_map           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
End of "ingroup database". This maps a generic data type in combination with its data size to the engine-specific data type. 
</div>
</div><p>
<a class="anchor" name="g1d594f0ad0eab77e4b925887be7e4b08"></a><!-- doxytag: member="database.inc::db_type_placeholder" ref="g1d594f0ad0eab77e4b925887be7e4b08" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_type_placeholder           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a Schema API field type, return the correct -placeholder.<p>
Embed the placeholder in a query to be passed to db_query and and pass as an argument to db_query a value of the specified type.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>The Schema API type of a field. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The placeholder string to embed in a query for that type. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g979670bd6bd2e34337ffc5f0810f2d71"></a><!-- doxytag: member="common.inc::drupal_get_schema" ref="g979670bd6bd2e34337ffc5f0810f2d71" args="($table=NULL, $rebuild=FALSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_get_schema           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>rebuild</em> = <code>FALSE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the schema definition of a table, or the whole database schema.<p>
The returned schema will include any modifications made by any module that implements hook_schema_alter().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The name of the table. If not given, the schema of all tables is returned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$rebuild</em>&nbsp;</td><td>If true, the schema will be rebuilt instead of retrieved from the cache. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gecb0d63f03b96dd1426298804e091d3b"></a><!-- doxytag: member="common.inc::drupal_get_schema_unprocessed" ref="gecb0d63f03b96dd1426298804e091d3b" args="($module, $table=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_get_schema_unprocessed           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the unprocessed and unaltered version of a module's schema.<p>
Use this function only if you explicitly need the original specification of a schema, as it was defined in a module's hook_schema(). No additional default values will be set, hook_schema_alter() is not invoked and these unprocessed definitions won't be cached.<p>
This function can be used to retrieve a schema specification in hook_schema(), so it allows you to derive your tables from existing specifications.<p>
It is also used by <a class="el" href="group__schemaapi.html#g9706b8d6ecdac10302d83bd50935a698">drupal_install_schema()</a> and <a class="el" href="group__schemaapi.html#g0688b6627af9dc05f2618f81489c3db0">drupal_uninstall_schema()</a> to ensure that a module's tables are created exactly as specified without any changes introduced by a module that implements hook_schema_alter().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$module</em>&nbsp;</td><td>The module to which the table belongs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The name of the table. If not given, the module's complete schema is returned. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g9706b8d6ecdac10302d83bd50935a698"></a><!-- doxytag: member="common.inc::drupal_install_schema" ref="g9706b8d6ecdac10302d83bd50935a698" args="($module)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_install_schema           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>module</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create all tables that a module defines in its hook_schema().<p>
Note: This function does not pass the module's schema through hook_schema_alter(). The module's tables will be created exactly as the module defines them.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$module</em>&nbsp;</td><td>The module for which the tables will be created. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An array of arrays with the following key/value pairs:<ul>
<li>success: a boolean indicating whether the query succeeded.</li><li>query: the SQL query(s) executed, passed through <a class="el" href="bootstrap_8inc.html#76fc67a30fd8d75ddd80565e6e65a13d">check_plain()</a>. </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="gacfcd6f676ee9062f0ba50a008a05443"></a><!-- doxytag: member="common.inc::drupal_schema_fields_sql" ref="gacfcd6f676ee9062f0ba50a008a05443" args="($table, $prefix=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_schema_fields_sql           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve a list of fields from a table schema. The list is suitable for use in a SQL query.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The name of the table from which to retrieve fields. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>An</em>&nbsp;</td><td>optional prefix to to all fields.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An array of fields. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g0688b6627af9dc05f2618f81489c3db0"></a><!-- doxytag: member="common.inc::drupal_uninstall_schema" ref="g0688b6627af9dc05f2618f81489c3db0" args="($module)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_uninstall_schema           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>module</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove all tables that a module defines in its hook_schema().<p>
Note: This function does not pass the module's schema through hook_schema_alter(). The module's tables will be created exactly as the module defines them.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$module</em>&nbsp;</td><td>The module for which the tables will be removed. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An array of arrays with the following key/value pairs:<ul>
<li>success: a boolean indicating whether the query succeeded.</li><li>query: the SQL query(s) executed, passed through <a class="el" href="bootstrap_8inc.html#76fc67a30fd8d75ddd80565e6e65a13d">check_plain()</a>. </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="g85da8424c4111b46aefb6fcb3a899c7d"></a><!-- doxytag: member="common.inc::drupal_write_record" ref="g85da8424c4111b46aefb6fcb3a899c7d" args="($table, &amp;$object, $update=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">drupal_write_record           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>update</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Save a record to the database based upon the schema.<p>
Default values are filled in for missing items, and 'serial' (auto increment) types are filled in with IDs.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The name of the table; this must exist in schema API. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$object</em>&nbsp;</td><td>The object to write. This is a reference, as defaults according to the schema may be filled in on the object, as well as ID on the serial type(s). Both array an object types may be passed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$update</em>&nbsp;</td><td>If this is an update, specify the primary keys' field names. It is the caller's responsibility to know if a record for this object already exists in the database. If there is only 1 key, you may pass a simple string. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Failure to write a record will return FALSE. Otherwise SAVED_NEW or SAVED_UPDATED is returned depending on the operation performed. The $object parameter contains values for any serial fields defined by the $table. For example, $object-&gt;nid will be populated after inserting a new node. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Feb 12 18:59:46 2011 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
