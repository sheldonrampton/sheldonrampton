<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>sites/all/modules/contrib/filefield/filefield_widget.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sites/all/modules/contrib/filefield/filefield_widget.inc File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#bc36ff4a1ee9c352319ca022556d9f20">filefield_widget_settings_form</a> ($widget)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#aacc98c07dfd3a814c8d32146579c062">filefield_widget_settings_save</a> ($widget)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#a6d640500605541cbd124455806e05a1">_filefield_widget_settings_extensions_value</a> ($element)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#016c555f0ce2e7f71d2b371af07ec4c8">_filefield_widget_settings_extensions_validate</a> ($element, &amp;$form_state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="570e364a87d2b6506fa1752169d4219e"></a><!-- doxytag: member="filefield_widget.inc::_filefield_widget_settings_file_path_validate" ref="570e364a87d2b6506fa1752169d4219e" args="($element, &amp;$form_state)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_filefield_widget_settings_file_path_validate</b> ($element, &amp;$form_state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0d28b4cd0d6b8bdc5350e69b1b7f19a4"></a><!-- doxytag: member="filefield_widget.inc::_filefield_widget_settings_max_filesize_per_file_validate" ref="0d28b4cd0d6b8bdc5350e69b1b7f19a4" args="($element, &amp;$form_state)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_filefield_widget_settings_max_filesize_per_file_validate</b> ($element, &amp;$form_state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="619ea7c27a2b9b9e047579e5381545fc"></a><!-- doxytag: member="filefield_widget.inc::_filefield_widget_settings_max_filesize_per_node_validate" ref="619ea7c27a2b9b9e047579e5381545fc" args="($element, &amp;$form_state)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>_filefield_widget_settings_max_filesize_per_node_validate</b> ($element, &amp;$form_state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#0f015f9e3d585ea916f6fb8999543043">filefield_widget_file_path</a> ($field, $account=NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#d24461bcec49edffb02fec77e15c85f2">filefield_save_upload</a> ($element)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#3081760b9137ee464d84213644278ae6">filefield_widget_value</a> ($element, $edit=FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#45936448da9575c4ec10adb0e46e97e3">filefield_widget_process</a> ($element, $edit, &amp;$form_state, $form)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#2db56b57675267528a5cc3cbcc9b9ff2">filefield_widget_validate</a> (&amp;$element, &amp;$form_state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#b61afc416bab06c537321d636e1cc47b">theme_filefield_widget</a> ($element)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d82946921f996f1fe51bd0c0b279959c"></a><!-- doxytag: member="filefield_widget.inc::theme_filefield_widget_preview" ref="d82946921f996f1fe51bd0c0b279959c" args="($item)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>theme_filefield_widget_preview</b> ($item)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a4e73d24bbe522401a76c5d98f0cff4"></a><!-- doxytag: member="filefield_widget.inc::theme_filefield_widget_item" ref="4a4e73d24bbe522401a76c5d98f0cff4" args="($element)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>theme_filefield_widget_item</b> ($element)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#aac3ac93a565ef418ae15d070fbc4625">theme_filefield_widget_file</a> ($element)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="filefield__widget_8inc.html#37900bfc24e625df1de43f4b11ab8d7d">filefield_node_form_validate</a> ($form, &amp;$form_state)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains CCK widget related functionality.<p>
Uses content.module to store the fid and field specific metadata, and Drupal's files table to store the actual file data. <hr><h2>Function Documentation</h2>
<a class="anchor" name="016c555f0ce2e7f71d2b371af07ec4c8"></a><!-- doxytag: member="filefield_widget.inc::_filefield_widget_settings_extensions_validate" ref="016c555f0ce2e7f71d2b371af07ec4c8" args="($element, &amp;$form_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_filefield_widget_settings_extensions_validate           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>form_state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A FAPI element_validate callback to strip commas from extension lists. 
</div>
</div><p>
<a class="anchor" name="a6d640500605541cbd124455806e05a1"></a><!-- doxytag: member="filefield_widget.inc::_filefield_widget_settings_extensions_value" ref="a6d640500605541cbd124455806e05a1" args="($element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_filefield_widget_settings_extensions_value           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A FAPI pre_render() function to set a cosmetic default value for extensions. 
</div>
</div><p>
<a class="anchor" name="37900bfc24e625df1de43f4b11ab8d7d"></a><!-- doxytag: member="filefield_widget.inc::filefield_node_form_validate" ref="37900bfc24e625df1de43f4b11ab8d7d" args="($form, &amp;$form_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_node_form_validate           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>form</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>form_state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Additional validate handler for the node form.<p>
This function checks the required properties on file fields and calculates node upload totals for all file fields. The required property is not properly supported on file fields by Drupal core, so we do this manually. 
</div>
</div><p>
<a class="anchor" name="d24461bcec49edffb02fec77e15c85f2"></a><!-- doxytag: member="filefield_widget.inc::filefield_save_upload" ref="d24461bcec49edffb02fec77e15c85f2" args="($element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_save_upload           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a FAPI element, save any files that may have been uploaded into it.<p>
This function should only be called during validate, submit, or value_callback functions.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$element</em>&nbsp;</td><td>The FAPI element whose values are being saved. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="0f015f9e3d585ea916f6fb8999543043"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_file_path" ref="0f015f9e3d585ea916f6fb8999543043" args="($field, $account=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_file_path           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>account</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine the widget's files directory<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>A CCK field array. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$account</em>&nbsp;</td><td>The user account object to calculate the file path for. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The files directory path, with any tokens replaced. </dd></dl>

</div>
</div><p>
<a class="anchor" name="45936448da9575c4ec10adb0e46e97e3"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_process" ref="45936448da9575c4ec10adb0e46e97e3" args="($element, $edit, &amp;$form_state, $form)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_process           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>edit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>form_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>form</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An element process callback for the filefield_widget field type.<p>
Expands the filefield_widget type to include the upload field, upload and remove buttons, and the description field. 
</div>
</div><p>
<a class="anchor" name="bc36ff4a1ee9c352319ca022556d9f20"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_settings_form" ref="bc36ff4a1ee9c352319ca022556d9f20" args="($widget)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_settings_form           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>widget</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Implementation of CCK's hook_widget_settings($op == 'form'). 
</div>
</div><p>
<a class="anchor" name="aacc98c07dfd3a814c8d32146579c062"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_settings_save" ref="aacc98c07dfd3a814c8d32146579c062" args="($widget)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_settings_save           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>widget</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Implementation of CCK's hook_widget_settings($op == 'save'). 
</div>
</div><p>
<a class="anchor" name="2db56b57675267528a5cc3cbcc9b9ff2"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_validate" ref="2db56b57675267528a5cc3cbcc9b9ff2" args="(&amp;$element, &amp;$form_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_validate           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>form_state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An element_validate callback for the filefield_widget field. 
</div>
</div><p>
<a class="anchor" name="3081760b9137ee464d84213644278ae6"></a><!-- doxytag: member="filefield_widget.inc::filefield_widget_value" ref="3081760b9137ee464d84213644278ae6" args="($element, $edit=FALSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filefield_widget_value           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>edit</em> = <code>FALSE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The value_callback for the filefield_widget type element. 
</div>
</div><p>
<a class="anchor" name="b61afc416bab06c537321d636e1cc47b"></a><!-- doxytag: member="filefield_widget.inc::theme_filefield_widget" ref="b61afc416bab06c537321d636e1cc47b" args="($element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">theme_filefield_widget           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FormAPI theme function. Theme the output of an image field. 
</div>
</div><p>
<a class="anchor" name="aac3ac93a565ef418ae15d070fbc4625"></a><!-- doxytag: member="filefield_widget.inc::theme_filefield_widget_file" ref="aac3ac93a565ef418ae15d070fbc4625" args="($element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">theme_filefield_widget_file           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>element</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Custom theme function for FileField upload elements.<p>
This function allows us to put the "Upload" button immediately after the file upload field by respecting the field_suffix property. 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Feb 12 18:59:45 2011 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
