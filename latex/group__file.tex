\hypertarget{group__file}{
\section{File interface}
\label{group__file}\index{File interface@{File interface}}
}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum \textbf{FILE\_\-DOWNLOADS\_\-PUBLIC} 
\item 
enum \textbf{FILE\_\-DOWNLOADS\_\-PRIVATE} 
\item 
enum \textbf{FILE\_\-CREATE\_\-DIRECTORY} 
\item 
enum \textbf{FILE\_\-MODIFY\_\-PERMISSIONS} 
\item 
enum \textbf{FILE\_\-EXISTS\_\-RENAME} 
\item 
enum \textbf{FILE\_\-EXISTS\_\-REPLACE} 
\item 
enum \textbf{FILE\_\-EXISTS\_\-ERROR} 
\item 
enum \hyperlink{group__file_g436af683744d1fefcd6da3d694633d19}{FILE\_\-STATUS\_\-TEMPORARY} 
\item 
enum \textbf{FILE\_\-STATUS\_\-PERMANENT} 
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
\hyperlink{group__file_g1a305a4da1e6e5c6b1783ceffb66c340}{file\_\-create\_\-url} (\$path)
\item 
\hyperlink{group__file_g306337da81ebf20aa858167c0ca5a979}{file\_\-create\_\-path} (\$dest=0)
\item 
\hyperlink{group__file_g1cae9f6fea37182a71710f0209d586dd}{file\_\-check\_\-directory} (\&\$directory, \$mode=0, \$form\_\-item=NULL)
\item 
\hyperlink{group__file_gf6eee3f0c0c8bc7ebca388ed3032ba66}{file\_\-check\_\-path} (\&\$path)
\item 
\hyperlink{group__file_g1cdeffc5a199d73e83e1e1d27753f619}{file\_\-check\_\-location} (\$source, \$directory= '')
\item 
\hyperlink{group__file_g7b8986808579dfb242787b60c8b9838a}{file\_\-copy} (\&\$source, \$dest=0, \$replace=FILE\_\-EXISTS\_\-RENAME)
\item 
\hyperlink{group__file_g3136d98d6189607e6cba12aaff55c66d}{file\_\-destination} (\$destination, \$replace)
\item 
\hyperlink{group__file_gd1dc7d1fd2d90de77d53d4fb90fb16b3}{file\_\-move} (\&\$source, \$dest=0, \$replace=FILE\_\-EXISTS\_\-RENAME)
\item 
\hyperlink{group__file_ge5f97959982c78dfde2f806757c21368}{file\_\-munge\_\-filename} (\$filename, \$extensions, \$alerts=TRUE)
\item 
\hyperlink{group__file_gbda71018b91068bcd9fcd527a0493347}{file\_\-unmunge\_\-filename} (\$filename)
\item 
\hyperlink{group__file_g057bbfa5f89c4e4c75f0030e6f1f3809}{file\_\-create\_\-filename} (\$basename, \$directory)
\item 
\hyperlink{group__file_g58d648a7a057d1e014727c7958935af6}{file\_\-delete} (\$path)
\item 
\hyperlink{group__file_g1cffb160754bb1704ab2c773a7c1ffb4}{file\_\-space\_\-used} (\$uid=NULL)
\item 
\hyperlink{group__file_gfb10e016dd068cbc5915619f7ca9bf2c}{file\_\-save\_\-upload} (\$source, \$validators=array(), \$dest=FALSE, \$replace=FILE\_\-EXISTS\_\-RENAME)
\item 
\hyperlink{group__file_ga70aadd824b8e9b654597c4fb6b6c70a}{file\_\-validate\_\-name\_\-length} (\$file)
\item 
\hyperlink{group__file_g7f9c8080c156bba75bf4ad9812378a2c}{file\_\-validate\_\-extensions} (\$file, \$extensions)
\item 
\hyperlink{group__file_g69120c7a4e953069673539c6710575f4}{file\_\-validate\_\-size} (\$file, \$file\_\-limit=0, \$user\_\-limit=0)
\item 
\hyperlink{group__file_gbabb21f40d60d2cbd21953d0935abdb7}{file\_\-validate\_\-is\_\-image} (\&\$file)
\item 
\hyperlink{group__file_gb6e58a5341acf0be4c030887836f75f6}{file\_\-validate\_\-image\_\-resolution} (\&\$file, \$maximum\_\-dimensions=0, \$minimum\_\-dimensions=0)
\item 
\hyperlink{group__file_g0c3dd2f6c8734744740fd1f00f84c719}{file\_\-save\_\-data} (\$data, \$dest, \$replace=FILE\_\-EXISTS\_\-RENAME)
\item 
\hyperlink{group__file_g68a0e6728e47cf2f9d543a0002ff3f49}{file\_\-set\_\-status} (\&\$file, \$status)
\item 
\hyperlink{group__file_g33925d82d6b6057e73ae7853f1be7125}{file\_\-transfer} (\$source, \$headers)
\item 
\hyperlink{group__file_g91226299fab7e95a673f6461bbc19b02}{file\_\-download} ()
\item 
\hyperlink{group__file_g374c73d3fe4f45c2d64a5fb0b22cb118}{file\_\-scan\_\-directory} (\$dir, \$mask, \$nomask=array('.', '..', 'CVS'), \$callback=0, \$recurse=TRUE, \$key= 'filename', \$min\_\-depth=0, \$depth=0)
\item 
\hyperlink{group__file_g250e5cfba54030ab1e5f031608860e42}{file\_\-directory\_\-temp} ()
\item 
\hyperlink{group__file_gd516f499a62a2e22f95f4969262cd617}{file\_\-directory\_\-path} ()
\item 
\hyperlink{group__file_g7cf25e6a2532a1d022ee1c655f895380}{file\_\-upload\_\-max\_\-size} ()
\item 
\hyperlink{group__file_g27868c5159f7f001457c284123fe9311}{file\_\-get\_\-mimetype} (\$filename, \$mapping=NULL)
\end{CompactItemize}


\subsection{Detailed Description}
Common file handling functions. 

\subsection{Enumeration Type Documentation}
\hypertarget{group__file_g436af683744d1fefcd6da3d694633d19}{
\index{file@{file}!FILE\_\-STATUS\_\-TEMPORARY@{FILE\_\-STATUS\_\-TEMPORARY}}
\index{FILE\_\-STATUS\_\-TEMPORARY@{FILE\_\-STATUS\_\-TEMPORARY}!file@{file}}
\subsubsection[{FILE\_\-STATUS\_\-TEMPORARY}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf FILE\_\-STATUS\_\-TEMPORARY}}}
\label{group__file_g436af683744d1fefcd6da3d694633d19}


A files status can be one of two values: temporary or permanent. The status for each file Drupal manages is stored in the \{files\} tables. If the status is temporary Drupal's file garbage collection will delete the file and remove it from the files table after a set period of time.

If you wish to add custom statuses for use by contrib modules please expand as binary flags and consider the first 8 bits reserved. (0,1,2,4,8,16,32,64,128) 

\subsection{Function Documentation}
\hypertarget{group__file_g1cae9f6fea37182a71710f0209d586dd}{
\index{file@{file}!file\_\-check\_\-directory@{file\_\-check\_\-directory}}
\index{file\_\-check\_\-directory@{file\_\-check\_\-directory}!file@{file}}
\subsubsection[{file\_\-check\_\-directory}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-check\_\-directory (\&\$ {\em directory}, \/  \$ {\em mode} = {\tt 0}, \/  \$ {\em form\_\-item} = {\tt NULL})}}
\label{group__file_g1cae9f6fea37182a71710f0209d586dd}


Check that the directory exists and is writable. Directories need to have execute permissions to be considered a directory by FTP servers, etc.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$directory}]A string containing the name of a directory path. \item[{\em \$mode}]A Boolean value to indicate if the directory should be created if it does not exist or made writable if it is read-only. \item[{\em \$form\_\-item}]An optional string containing the name of a form item that any errors will be attached to. This is useful for settings forms that require the user to specify a writable directory. If it can't be made to work, a form error will be set preventing them from saving the settings. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]FALSE when directory not found, or TRUE when directory exists. \end{Desc}
\hypertarget{group__file_g1cdeffc5a199d73e83e1e1d27753f619}{
\index{file@{file}!file\_\-check\_\-location@{file\_\-check\_\-location}}
\index{file\_\-check\_\-location@{file\_\-check\_\-location}!file@{file}}
\subsubsection[{file\_\-check\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-check\_\-location (\$ {\em source}, \/  \$ {\em directory} = {\tt ''})}}
\label{group__file_g1cdeffc5a199d73e83e1e1d27753f619}


Check if a file is really located inside \$directory. Should be used to make sure a file specified is really located within the directory to prevent exploits.



\begin{Code}\begin{verbatim}   // Returns FALSE:
   file_check_location('/www/example.com/files/../../../etc/passwd', '/www/example.com/files');
\end{verbatim}
\end{Code}



\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$source}]A string set to the file to check. \item[{\em \$directory}]A string where the file should be located. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 for invalid path or the real path of the source. \end{Desc}
\hypertarget{group__file_gf6eee3f0c0c8bc7ebca388ed3032ba66}{
\index{file@{file}!file\_\-check\_\-path@{file\_\-check\_\-path}}
\index{file\_\-check\_\-path@{file\_\-check\_\-path}!file@{file}}
\subsubsection[{file\_\-check\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-check\_\-path (\&\$ {\em path})}}
\label{group__file_gf6eee3f0c0c8bc7ebca388ed3032ba66}


Checks path to see if it is a directory, or a dir/file.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$path}]A string containing a file path. This will be set to the directory's path. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]If the directory is not in a Drupal writable directory, FALSE is returned. Otherwise, the base name of the path is returned. \end{Desc}
\hypertarget{group__file_g7b8986808579dfb242787b60c8b9838a}{
\index{file@{file}!file\_\-copy@{file\_\-copy}}
\index{file\_\-copy@{file\_\-copy}!file@{file}}
\subsubsection[{file\_\-copy}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-copy (\&\$ {\em source}, \/  \$ {\em dest} = {\tt 0}, \/  \$ {\em replace} = {\tt FILE\_\-EXISTS\_\-RENAME})}}
\label{group__file_g7b8986808579dfb242787b60c8b9838a}


Copies a file to a new location.

This is a powerful function that in many ways performs like an advanced version of copy().\begin{itemize}
\item Checks if \$source and \$dest are valid and readable/writable.\item Performs a file copy if \$source is not equal to \$dest.\item If file already exists in \$dest either the call will error out, replace the file or rename the file based on the \$replace parameter.\end{itemize}


\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$source}]Either a string specifying the file location of the original file or an object containing a 'filepath' property. This parameter is passed by reference and will contain the resulting destination filename in case of success. \item[{\em \$dest}]A string containing the directory \$source should be copied to. If this value is omitted, Drupal's 'files' directory will be used. \item[{\em \$replace}]Replace behavior when the destination file already exists.\begin{itemize}
\item FILE\_\-EXISTS\_\-REPLACE: Replace the existing file.\item FILE\_\-EXISTS\_\-RENAME: Append \_\-\{incrementing number\} until the filename is unique.\item FILE\_\-EXISTS\_\-ERROR: Do nothing and return FALSE. \end{itemize}
\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE for success, FALSE for failure. \end{Desc}
\hypertarget{group__file_g057bbfa5f89c4e4c75f0030e6f1f3809}{
\index{file@{file}!file\_\-create\_\-filename@{file\_\-create\_\-filename}}
\index{file\_\-create\_\-filename@{file\_\-create\_\-filename}!file@{file}}
\subsubsection[{file\_\-create\_\-filename}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-create\_\-filename (\$ {\em basename}, \/  \$ {\em directory})}}
\label{group__file_g057bbfa5f89c4e4c75f0030e6f1f3809}


Create a full file path from a directory and filename. If a file with the specified name already exists, an alternative will be used.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$basename}]string filename \item[{\em \$directory}]string directory \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]\end{Desc}
\hypertarget{group__file_g306337da81ebf20aa858167c0ca5a979}{
\index{file@{file}!file\_\-create\_\-path@{file\_\-create\_\-path}}
\index{file\_\-create\_\-path@{file\_\-create\_\-path}!file@{file}}
\subsubsection[{file\_\-create\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-create\_\-path (\$ {\em dest} = {\tt 0})}}
\label{group__file_g306337da81ebf20aa858167c0ca5a979}


Make sure the destination is a complete path and resides in the file system directory, if it is not prepend the file system directory.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$dest}]A string containing the path to verify. If this value is omitted, Drupal's 'files' directory will be used. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A string containing the path to file, with file system directory appended if necessary, or FALSE if the path is invalid (i.e. outside the configured 'files' or temp directories). \end{Desc}
\hypertarget{group__file_g1a305a4da1e6e5c6b1783ceffb66c340}{
\index{file@{file}!file\_\-create\_\-url@{file\_\-create\_\-url}}
\index{file\_\-create\_\-url@{file\_\-create\_\-url}!file@{file}}
\subsubsection[{file\_\-create\_\-url}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-create\_\-url (\$ {\em path})}}
\label{group__file_g1a305a4da1e6e5c6b1783ceffb66c340}


Create the download path to a file.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$path}]A string containing the path of the file to generate URL for. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A string containing a URL that can be used to download the file. \end{Desc}
\hypertarget{group__file_g58d648a7a057d1e014727c7958935af6}{
\index{file@{file}!file\_\-delete@{file\_\-delete}}
\index{file\_\-delete@{file\_\-delete}!file@{file}}
\subsubsection[{file\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-delete (\$ {\em path})}}
\label{group__file_g58d648a7a057d1e014727c7958935af6}


Delete a file.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$path}]A string containing a file path. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE for success, FALSE for failure. \end{Desc}
\hypertarget{group__file_g3136d98d6189607e6cba12aaff55c66d}{
\index{file@{file}!file\_\-destination@{file\_\-destination}}
\index{file\_\-destination@{file\_\-destination}!file@{file}}
\subsubsection[{file\_\-destination}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-destination (\$ {\em destination}, \/  \$ {\em replace})}}
\label{group__file_g3136d98d6189607e6cba12aaff55c66d}


Determines the destination path for a file depending on how replacement of existing files should be handled.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$destination}]A string specifying the desired path. \item[{\em \$replace}]Replace behavior when the destination file already exists.\begin{itemize}
\item FILE\_\-EXISTS\_\-REPLACE - Replace the existing file\item FILE\_\-EXISTS\_\-RENAME - Append \_\-\{incrementing number\} until the filename is unique\item FILE\_\-EXISTS\_\-ERROR - Do nothing and return FALSE. \end{itemize}
\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The destination file path or FALSE if the file already exists and FILE\_\-EXISTS\_\-ERROR was specified. \end{Desc}
\hypertarget{group__file_gd516f499a62a2e22f95f4969262cd617}{
\index{file@{file}!file\_\-directory\_\-path@{file\_\-directory\_\-path}}
\index{file\_\-directory\_\-path@{file\_\-directory\_\-path}!file@{file}}
\subsubsection[{file\_\-directory\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-directory\_\-path ()}}
\label{group__file_gd516f499a62a2e22f95f4969262cd617}


Determine the default 'files' directory.

\begin{Desc}
\item[Returns:]A string containing the path to Drupal's 'files' directory. \end{Desc}
\hypertarget{group__file_g250e5cfba54030ab1e5f031608860e42}{
\index{file@{file}!file\_\-directory\_\-temp@{file\_\-directory\_\-temp}}
\index{file\_\-directory\_\-temp@{file\_\-directory\_\-temp}!file@{file}}
\subsubsection[{file\_\-directory\_\-temp}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-directory\_\-temp ()}}
\label{group__file_g250e5cfba54030ab1e5f031608860e42}


Determine the default temporary directory.

\begin{Desc}
\item[Returns:]A string containing a temp directory. \end{Desc}
\hypertarget{group__file_g91226299fab7e95a673f6461bbc19b02}{
\index{file@{file}!file\_\-download@{file\_\-download}}
\index{file\_\-download@{file\_\-download}!file@{file}}
\subsubsection[{file\_\-download}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-download ()}}
\label{group__file_g91226299fab7e95a673f6461bbc19b02}


Call modules that implement hook\_\-file\_\-download() to find out if a file is accessible and what headers it should be transferred with. If a module returns -1 \hyperlink{common_8inc_0bbff371f9373002e71f2e1347fcf481}{drupal\_\-access\_\-denied()} will be returned. If one or more modules returned headers the download will start with the returned headers. If no modules respond \hyperlink{common_8inc_52b08cd98e1756326c1bd5b56c39a884}{drupal\_\-not\_\-found()} will be returned. \hypertarget{group__file_g27868c5159f7f001457c284123fe9311}{
\index{file@{file}!file\_\-get\_\-mimetype@{file\_\-get\_\-mimetype}}
\index{file\_\-get\_\-mimetype@{file\_\-get\_\-mimetype}!file@{file}}
\subsubsection[{file\_\-get\_\-mimetype}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-get\_\-mimetype (\$ {\em filename}, \/  \$ {\em mapping} = {\tt NULL})}}
\label{group__file_g27868c5159f7f001457c284123fe9311}


Determine an Internet Media Type, or MIME type from a filename.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$filename}]Name of the file, including extension. \item[{\em \$mapping}]An optional array of extension to media type mappings in the form 'extension1$|$extension2$|$...' =$>$ 'type'.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The internet media type registered for the extension or application/octet-stream for unknown extensions. \end{Desc}
\hypertarget{group__file_gd1dc7d1fd2d90de77d53d4fb90fb16b3}{
\index{file@{file}!file\_\-move@{file\_\-move}}
\index{file\_\-move@{file\_\-move}!file@{file}}
\subsubsection[{file\_\-move}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-move (\&\$ {\em source}, \/  \$ {\em dest} = {\tt 0}, \/  \$ {\em replace} = {\tt FILE\_\-EXISTS\_\-RENAME})}}
\label{group__file_gd1dc7d1fd2d90de77d53d4fb90fb16b3}


Moves a file to a new location.

\begin{itemize}
\item Checks if \$source and \$dest are valid and readable/writable.\item Performs a file move if \$source is not equal to \$dest.\item If file already exists in \$dest either the call will error out, replace the file or rename the file based on the \$replace parameter.\end{itemize}


\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$source}]Either a string specifying the file location of the original file or an object containing a 'filepath' property. This parameter is passed by reference and will contain the resulting destination filename in case of success. \item[{\em \$dest}]A string containing the directory \$source should be copied to. If this value is omitted, Drupal's 'files' directory will be used. \item[{\em \$replace}]Replace behavior when the destination file already exists.\begin{itemize}
\item FILE\_\-EXISTS\_\-REPLACE: Replace the existing file.\item FILE\_\-EXISTS\_\-RENAME: Append \_\-\{incrementing number\} until the filename is unique.\item FILE\_\-EXISTS\_\-ERROR: Do nothing and return FALSE. \end{itemize}
\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE for success, FALSE for failure. \end{Desc}
\hypertarget{group__file_ge5f97959982c78dfde2f806757c21368}{
\index{file@{file}!file\_\-munge\_\-filename@{file\_\-munge\_\-filename}}
\index{file\_\-munge\_\-filename@{file\_\-munge\_\-filename}!file@{file}}
\subsubsection[{file\_\-munge\_\-filename}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-munge\_\-filename (\$ {\em filename}, \/  \$ {\em extensions}, \/  \$ {\em alerts} = {\tt TRUE})}}
\label{group__file_ge5f97959982c78dfde2f806757c21368}


Modify a filename as needed for security purposes.

Munging a file name prevents unknown file extensions from masking exploit files. When web servers such as Apache decide how to process a URL request, they use the file extension. If the extension is not recognized, Apache skips that extension and uses the previous file extension. For example, if the file being requested is exploit.php.pps, and Apache does not recognize the '.pps' extension, it treats the file as PHP and executes it. To make this file name safe for Apache and prevent it from executing as PHP, the .php extension is \char`\"{}munged\char`\"{} into .php\_\-, making the safe file name exploit.php\_\-.pps.

Specifically, this function adds an underscore to all extensions that are between 2 and 5 characters in length, internal to the file name, and not included in \$extensions.

Function behavior is also controlled by the Drupal variable 'allow\_\-insecure\_\-uploads'. If 'allow\_\-insecure\_\-uploads' evaluates to TRUE, no alterations will be made, if it evaluates to FALSE, the filename is 'munged'.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$filename}]File name to modify. \item[{\em \$extensions}]A space-separated list of extensions that should not be altered. \item[{\em \$alerts}]If TRUE, \hyperlink{bootstrap_8inc_d9223d86c7b08b1288274ce211d9bfa6}{drupal\_\-set\_\-message()} will be called to display a message if the file name was changed.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The potentially modified \$filename. \end{Desc}
\hypertarget{group__file_g0c3dd2f6c8734744740fd1f00f84c719}{
\index{file@{file}!file\_\-save\_\-data@{file\_\-save\_\-data}}
\index{file\_\-save\_\-data@{file\_\-save\_\-data}!file@{file}}
\subsubsection[{file\_\-save\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-save\_\-data (\$ {\em data}, \/  \$ {\em dest}, \/  \$ {\em replace} = {\tt FILE\_\-EXISTS\_\-RENAME})}}
\label{group__file_g0c3dd2f6c8734744740fd1f00f84c719}


Save a string to the specified destination.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$data}]A string containing the contents of the file. \item[{\em \$dest}]A string containing the destination location. \item[{\em \$replace}]Replace behavior when the destination file already exists.\begin{itemize}
\item FILE\_\-EXISTS\_\-REPLACE - Replace the existing file\item FILE\_\-EXISTS\_\-RENAME - Append \_\-\{incrementing number\} until the filename is unique\item FILE\_\-EXISTS\_\-ERROR - Do nothing and return FALSE.\end{itemize}
\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A string containing the resulting filename or 0 on error \end{Desc}
\hypertarget{group__file_gfb10e016dd068cbc5915619f7ca9bf2c}{
\index{file@{file}!file\_\-save\_\-upload@{file\_\-save\_\-upload}}
\index{file\_\-save\_\-upload@{file\_\-save\_\-upload}!file@{file}}
\subsubsection[{file\_\-save\_\-upload}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-save\_\-upload (\$ {\em source}, \/  \$ {\em validators} = {\tt array()}, \/  \$ {\em dest} = {\tt FALSE}, \/  \$ {\em replace} = {\tt FILE\_\-EXISTS\_\-RENAME})}}
\label{group__file_gfb10e016dd068cbc5915619f7ca9bf2c}


Saves a file upload to a new location. The source file is validated as a proper upload and handled as such.

The file will be added to the files table as a temporary file. Temporary files are periodically cleaned. To make the file permanent file call \hyperlink{group__file_g68a0e6728e47cf2f9d543a0002ff3f49}{file\_\-set\_\-status()} to change its status.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$source}]A string specifying the name of the upload field to save. \item[{\em \$validators}]An optional, associative array of callback functions used to validate the file. The keys are function names and the values arrays of callback parameters which will be passed in after the file object. The functions should return an array of error messages; an empty array indicates that the file passed validation. The functions will be called in the order specified. \item[{\em \$dest}]A string containing the directory \$source should be copied to. If this is not provided or is not writable, the temporary directory will be used. \item[{\em \$replace}]A boolean indicating whether an existing file of the same name in the destination directory should overwritten. A false value will generate a new, unique filename in the destination directory. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An object containing the file information, or 0 in the event of an error. \end{Desc}
\hypertarget{group__file_g374c73d3fe4f45c2d64a5fb0b22cb118}{
\index{file@{file}!file\_\-scan\_\-directory@{file\_\-scan\_\-directory}}
\index{file\_\-scan\_\-directory@{file\_\-scan\_\-directory}!file@{file}}
\subsubsection[{file\_\-scan\_\-directory}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-scan\_\-directory (\$ {\em dir}, \/  \$ {\em mask}, \/  \$ {\em nomask} = {\tt array('.',~'..',~'CVS')}, \/  \$ {\em callback} = {\tt 0}, \/  \$ {\em recurse} = {\tt TRUE}, \/  \$ {\em key} = {\tt 'filename'}, \/  \$ {\em min\_\-depth} = {\tt 0}, \/  \$ {\em depth} = {\tt 0})}}
\label{group__file_g374c73d3fe4f45c2d64a5fb0b22cb118}


Finds all files that match a given mask in a given directory. Directories and files beginning with a period are excluded; this prevents hidden files and directories (such as SVN working directories) from being scanned.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$dir}]The base directory for the scan, without trailing slash. \item[{\em \$mask}]The regular expression of the files to find. \item[{\em \$nomask}]An array of files/directories to ignore. \item[{\em \$callback}]The callback function to call for each match. \item[{\em \$recurse}]When TRUE, the directory scan will recurse the entire tree starting at the provided directory. \item[{\em \$key}]The key to be used for the returned array of files. Possible values are \char`\"{}filename\char`\"{}, for the path starting with \$dir, \char`\"{}basename\char`\"{}, for the basename of the file, and \char`\"{}name\char`\"{} for the name of the file without an extension. \item[{\em \$min\_\-depth}]Minimum depth of directories to return files from. \item[{\em \$depth}]Current depth of recursion. This parameter is only used internally and should not be passed.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An associative array (keyed on the provided key) of objects with \char`\"{}path\char`\"{}, \char`\"{}basename\char`\"{}, and \char`\"{}name\char`\"{} members corresponding to the matching files. \end{Desc}
\hypertarget{group__file_g68a0e6728e47cf2f9d543a0002ff3f49}{
\index{file@{file}!file\_\-set\_\-status@{file\_\-set\_\-status}}
\index{file\_\-set\_\-status@{file\_\-set\_\-status}!file@{file}}
\subsubsection[{file\_\-set\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-set\_\-status (\&\$ {\em file}, \/  \$ {\em status})}}
\label{group__file_g68a0e6728e47cf2f9d543a0002ff3f49}


Set the status of a file.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]A Drupal file object \item[{\em status}]A status value to set the file to. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]FALSE on failure, TRUE on success and \$file-$>$status will contain the status. \end{Desc}
\hypertarget{group__file_g1cffb160754bb1704ab2c773a7c1ffb4}{
\index{file@{file}!file\_\-space\_\-used@{file\_\-space\_\-used}}
\index{file\_\-space\_\-used@{file\_\-space\_\-used}!file@{file}}
\subsubsection[{file\_\-space\_\-used}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-space\_\-used (\$ {\em uid} = {\tt NULL})}}
\label{group__file_g1cffb160754bb1704ab2c773a7c1ffb4}


Determine total disk space used by a single user or the whole filesystem.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$uid}]An optional user id. A NULL value returns the total space used by all files. \end{description}
\end{Desc}
\hypertarget{group__file_g33925d82d6b6057e73ae7853f1be7125}{
\index{file@{file}!file\_\-transfer@{file\_\-transfer}}
\index{file\_\-transfer@{file\_\-transfer}!file@{file}}
\subsubsection[{file\_\-transfer}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-transfer (\$ {\em source}, \/  \$ {\em headers})}}
\label{group__file_g33925d82d6b6057e73ae7853f1be7125}


Transfer file using http to client. Pipes a file through Drupal to the client.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$source}]File to transfer. \item[{\em \$headers}]An array of http headers to send along with file. \end{description}
\end{Desc}
\hypertarget{group__file_gbda71018b91068bcd9fcd527a0493347}{
\index{file@{file}!file\_\-unmunge\_\-filename@{file\_\-unmunge\_\-filename}}
\index{file\_\-unmunge\_\-filename@{file\_\-unmunge\_\-filename}!file@{file}}
\subsubsection[{file\_\-unmunge\_\-filename}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-unmunge\_\-filename (\$ {\em filename})}}
\label{group__file_gbda71018b91068bcd9fcd527a0493347}


Undo the effect of upload\_\-munge\_\-filename().

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$filename}]string filename \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]string \end{Desc}
\hypertarget{group__file_g7cf25e6a2532a1d022ee1c655f895380}{
\index{file@{file}!file\_\-upload\_\-max\_\-size@{file\_\-upload\_\-max\_\-size}}
\index{file\_\-upload\_\-max\_\-size@{file\_\-upload\_\-max\_\-size}!file@{file}}
\subsubsection[{file\_\-upload\_\-max\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-upload\_\-max\_\-size ()}}
\label{group__file_g7cf25e6a2532a1d022ee1c655f895380}


Determine the maximum file upload size by querying the PHP settings.

\begin{Desc}
\item[Returns:]A file size limit in bytes based on the PHP upload\_\-max\_\-filesize and post\_\-max\_\-size \end{Desc}
\hypertarget{group__file_g7f9c8080c156bba75bf4ad9812378a2c}{
\index{file@{file}!file\_\-validate\_\-extensions@{file\_\-validate\_\-extensions}}
\index{file\_\-validate\_\-extensions@{file\_\-validate\_\-extensions}!file@{file}}
\subsubsection[{file\_\-validate\_\-extensions}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-validate\_\-extensions (\$ {\em file}, \/  \$ {\em extensions})}}
\label{group__file_g7f9c8080c156bba75bf4ad9812378a2c}


Check that the filename ends with an allowed extension. This check is not enforced for the user \#1.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$file}]A Drupal file object. \item[{\em \$extensions}]A string with a space separated \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An array. If the file extension is not allowed, it will contain an error message. \end{Desc}
\hypertarget{group__file_gb6e58a5341acf0be4c030887836f75f6}{
\index{file@{file}!file\_\-validate\_\-image\_\-resolution@{file\_\-validate\_\-image\_\-resolution}}
\index{file\_\-validate\_\-image\_\-resolution@{file\_\-validate\_\-image\_\-resolution}!file@{file}}
\subsubsection[{file\_\-validate\_\-image\_\-resolution}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-validate\_\-image\_\-resolution (\&\$ {\em file}, \/  \$ {\em maximum\_\-dimensions} = {\tt 0}, \/  \$ {\em minimum\_\-dimensions} = {\tt 0})}}
\label{group__file_gb6e58a5341acf0be4c030887836f75f6}


If the file is an image verify that its dimensions are within the specified maximum and minimum dimensions. Non-image files will be ignored.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$file}]A Drupal file object. This function may resize the file affecting its size. \item[{\em \$maximum\_\-dimensions}]An optional string in the form WIDTHxHEIGHT e.g. '640x480' or '85x85'. If an image toolkit is installed the image will be resized down to these dimensions. A value of 0 indicates no restriction on size, so resizing will be attempted. \item[{\em \$minimum\_\-dimensions}]An optional string in the form WIDTHxHEIGHT. This will check that the image meets a minimum size. A value of 0 indicates no restriction. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An array. If the file is an image and did not meet the requirements, it will contain an error message. \end{Desc}
\hypertarget{group__file_gbabb21f40d60d2cbd21953d0935abdb7}{
\index{file@{file}!file\_\-validate\_\-is\_\-image@{file\_\-validate\_\-is\_\-image}}
\index{file\_\-validate\_\-is\_\-image@{file\_\-validate\_\-is\_\-image}!file@{file}}
\subsubsection[{file\_\-validate\_\-is\_\-image}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-validate\_\-is\_\-image (\&\$ {\em file})}}
\label{group__file_gbabb21f40d60d2cbd21953d0935abdb7}


Check that the file is recognized by \hyperlink{group__image_g64daec548dec0ae4c1d30053446e8f80}{image\_\-get\_\-info()} as an image.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$file}]A Drupal file object. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An array. If the file is not an image, it will contain an error message. \end{Desc}
\hypertarget{group__file_ga70aadd824b8e9b654597c4fb6b6c70a}{
\index{file@{file}!file\_\-validate\_\-name\_\-length@{file\_\-validate\_\-name\_\-length}}
\index{file\_\-validate\_\-name\_\-length@{file\_\-validate\_\-name\_\-length}!file@{file}}
\subsubsection[{file\_\-validate\_\-name\_\-length}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-validate\_\-name\_\-length (\$ {\em file})}}
\label{group__file_ga70aadd824b8e9b654597c4fb6b6c70a}


Check for files with names longer than we can store in the database.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$file}]A Drupal file object. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An array. If the file name is too long, it will contain an error message. \end{Desc}
\hypertarget{group__file_g69120c7a4e953069673539c6710575f4}{
\index{file@{file}!file\_\-validate\_\-size@{file\_\-validate\_\-size}}
\index{file\_\-validate\_\-size@{file\_\-validate\_\-size}!file@{file}}
\subsubsection[{file\_\-validate\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}file\_\-validate\_\-size (\$ {\em file}, \/  \$ {\em file\_\-limit} = {\tt 0}, \/  \$ {\em user\_\-limit} = {\tt 0})}}
\label{group__file_g69120c7a4e953069673539c6710575f4}


Check that the file's size is below certain limits. This check is not enforced for the user \#1.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em \$file}]A Drupal file object. \item[{\em \$file\_\-limit}]An integer specifying the maximum file size in bytes. Zero indicates that no limit should be enforced. \item[{\em \$user\_\-limit}]An integer specifying the maximum number of bytes the user is allowed. Zero indicates that no limit should be enforced. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]An array. If the file size exceeds limits, it will contain an error message. \end{Desc}
